generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://alexandreac:sieges78@localhost:5432/im-tools"
}

model KoboServer {
  id       String     @id @default(uuid())
  url      String
  token    String
  KoboForm KoboForm[]
}

model KoboAnswers {
  id                     String   @id
  form                   KoboForm @relation(fields: [formId], references: [id])
  formId                 String
  start                  DateTime
  end                    DateTime
  version                String
  submissionTime         DateTime
  validationStatus       String?
  validatedBy            String?
  lastValidatedTimestamp Int?
  geolocation            String?
  answers                Json
}

model KoboForm {
  id          String        @id
  name        String
  server      KoboServer    @relation(fields: [serverId], references: [id])
  serverId    String
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @default(now())
  uploadedBy  String?
  KoboAnswers KoboAnswers[]
}
